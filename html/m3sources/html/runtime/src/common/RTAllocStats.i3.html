<HTML>
<HEAD>
<TITLE>SRC Modula-3: runtime/src/common/RTAllocStats.i3</TITLE>
</HEAD>
<BODY>
<A NAME="0TOP0">
<H2>runtime/src/common/RTAllocStats.i3</H2></A><HR>
<inInterface>
<PRE><A HREF="../../../COPYRIGHT.html">Copyright (C) 1994, Digital Equipment Corp.</A>
</PRE><BLOCKQUOTE><EM>                                                           </EM></BLOCKQUOTE><PRE>

INTERFACE <interface><A HREF="RTAllocStats.m3.html">RTAllocStats</A></interface>;
</PRE> This interface controls the collection of per-call-site
   allocation statistics.  This interface is only useful on
   platforms with a stack walker (ie. DS3100 &amp; ALPHA_OSF),
   on all other platforms these routines are no-ops.
<P>
   NOTE: The implementation of this interface uses the <CODE>spare</CODE>
         fields of REF headers.


<P><PRE>FROM <A HREF="RT0.i3.html">RT0</A> IMPORT Typecode;

VAR siteDepth := 3;
</PRE><BLOCKQUOTE><EM> The number of procedure frames included in a <CODE>site</CODE>. </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="RTAllocStats.m3.html#EnableTrace">EnableTrace</A> (tc: Typecode);
</PRE><BLOCKQUOTE><EM> Begin recording allocation statistics for type <CODE>tc</CODE>.  It is a
   checked runtime error to pass an improper typecode or one that
   corresponds to an untraced type. </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="RTAllocStats.m3.html#NSites">NSites</A> (tc: Typecode): INTEGER;
</PRE><BLOCKQUOTE><EM> Returns the number of sites recorded for type <CODE>tc</CODE>.  If sites are
   not being recorded for <CODE>tc</CODE>, returns -1. </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="RTAllocStats.m3.html#GetSiteText">GetSiteText</A> (tc: Typecode; site, depth: CARDINAL): TEXT;
</PRE><BLOCKQUOTE><EM> If sites are being traced for type <CODE>tc</CODE>, <CODE>site</CODE> is a valid tag for
   the type, and <CODE>depth</CODE> is less than the <CODE>siteDepth</CODE> when the site
   was captured, return a description of the procedure frame corresponding
   to the captured PC.  Otherwise, return <CODE>NIL</CODE>. </EM></BLOCKQUOTE><PRE>

END RTAllocStats.
</PRE>
</inInterface>
<PRE>























</PRE>
</BODY>
</HTML>
