<HTML>
<HEAD>
<TITLE>SRC Modula-3: runtime/src/common/RTMapOp.m3</TITLE>
</HEAD>
<BODY>
<A NAME="0TOP0">
<H2>runtime/src/common/RTMapOp.m3</H2></A><HR>
<inModule>
<PRE><A HREF="../../../COPYRIGHT.html">Copyright (C) 1994, Digital Equipment Corp.</A>

UNSAFE MODULE <module><implements><A HREF="RTMapOp.i3.html">RTMapOp</A></implements></module>;

IMPORT <A HREF="../../../word/src/Word.i3.html">Word</A>;

PROCEDURE <A NAME="GetInt"><procedure>GetInt</procedure></A> (VAR pc: ADDRESS;  size: [1..8]): INTEGER =
  VAR
    p : BP       := pc;
    n : INTEGER  := p^;
    s : CARDINAL := size-1;
    k : CARDINAL := 8;
  BEGIN
    INC (p, ADRSIZE (Byte));
    WHILE (s &gt; 0) DO
      n := Word.Or (n, Word.LeftShift (p^, k));
      INC (p, ADRSIZE (Byte));
      INC (k, 8);
      DEC (s);
    END;
    pc := p;
    RETURN n;
  END GetInt;

PROCEDURE <A NAME="Push"><procedure>Push</procedure></A> (VAR stack: Stack;  a: ADDRESS;  b: INTEGER) =
  BEGIN
    WITH z = stack.data [stack.top] DO  z.pc := a;  z.count := b;  END;
    INC (stack.top);
  END Push;

BEGIN
END RTMapOp.
</PRE>
</inModule>
<PRE>























</PRE>
</BODY>
</HTML>
