<HTML>
<HEAD>
<TITLE>SRC Modula-3: ui/src/winvbt/WinContext.i3</TITLE>
</HEAD>
<BODY>
<A NAME="0TOP0">
<H2>ui/src/winvbt/WinContext.i3</H2></A><HR>
<inInterface>
<PRE><A HREF="../../../COPYRIGHT.html">Copyright (C) 1994, Digital Equipment Corp.</A>
</PRE><BLOCKQUOTE><EM> Digital Internal Use Only                                                 </EM></BLOCKQUOTE><PRE>
</PRE>                                                                           
       Created on Wed Feb 15 15:52:21 PST 1995 by najork                   

<P>
<P><PRE>INTERFACE <interface><A HREF="WinContext.m3.html">WinContext</A></interface>;

IMPORT <A HREF="../../../C/src/Common/Ctypes.i3.html">Ctypes</A>, <A HREF="../vbt/PaintPrivate.i3.html">PaintPrivate</A>, <A HREF="../../../geometry/src/Point.i3.html">Point</A>, <A HREF="../vbt/VBT.i3.html">VBT</A>, <A HREF="../../../win32/src/WinDef.i3.html">WinDef</A>, <A HREF="WinScreenType.i3.html">WinScreenType</A>;
</PRE> This module provides procedures for modifying device context, and for
   undoing those modifications.  These procedures fall into two categories:
   <CODE>PushMumble(hdc, ...)</CODE> changes the device context <CODE>hdc</CODE> to be appropriate 
   for subsequent mumble operations; <CODE>Pop(ctxt)</CODE> reverts the device context 
   back to its prior state. 
<P>
   Push and pop operations must always be paired. The push operation returns
   a context record, which must be passed as a parameter to the corresponding 
   pop operation.  The context record contains the information needed to
   restore the original device context. Using a record type instead of an 
   object type avoids heap allocations.
<P>
   A possible further optimization would be to pass a caller-allocated context
   record to push, to avoid copying of the return argument.  

<P>
<P><PRE>TYPE
  T = RECORD
    hdc  : WinDef.HDC;            (* device context *)
    rop2 : Ctypes.int    := 0;    (* binary raster operation code *)
        (* Note: We do not need to save the ternary raster operation code *)
    pen  : WinDef.HPEN   := NIL;
    brush: WinDef.HBRUSH := NIL;
  END;
  (* The following aspects of a device context are not saved
     (and therefore not restored either):
     FillStyle, Text Color, Background Color, ... *)

PROCEDURE <A HREF="WinContext.m3.html#PushTint">PushTint</A> (hdc: WinDef.HDC;
                    st : WinScreenType.T;
                    op : PaintPrivate.PaintOp): T;
</PRE><BLOCKQUOTE><EM> Modify <CODE>hdc</CODE> to be suitable for tint painting. This procedure 
   is the moral equivalent of <CODE>XGC.ResolveTintGC</CODE> in xvbt. </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="WinContext.m3.html#PushTexture">PushTexture</A> (hdc  : WinDef.HDC;
                       st   : WinScreenType.T;
                       op   : PaintPrivate.PaintOp;
                       pm   : PaintPrivate.Pixmap;
                       delta: Point.T): T;
</PRE><BLOCKQUOTE><EM> Modify <CODE>hdc</CODE> to be suitable for texture painting. This procedure 
   is the moral equivalent of <CODE>XGC.ResolveTextureGC</CODE> in xvbt. </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="WinContext.m3.html#PushFill">PushFill</A> (hdc  : WinDef.HDC;
                    st   : WinScreenType.T;
                    op   : PaintPrivate.PaintOp;
                    pm   : PaintPrivate.Pixmap;
                    delta: Point.T;
                    wind : VBT.WindingCondition): T;
</PRE><BLOCKQUOTE><EM> Modify <CODE>hdc</CODE> to be suitable for filling polygons. This procedure 
   is the moral equivalent of <CODE>XGC.ResolveFillGC</CODE> in xvbt. </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="WinContext.m3.html#PushStroke">PushStroke</A> (hdc  : WinDef.HDC;
                      st   : WinScreenType.T;
                      op   : PaintPrivate.PaintOp;
                      pm   : PaintPrivate.Pixmap;
                      delta: Point.T;
                      width: CARDINAL;
                      end  : VBT.EndStyle;
                      join : VBT.JoinStyle): T;
</PRE><BLOCKQUOTE><EM> Modify <CODE>hdc</CODE> to be suitable for stroking lines. This procedure 
   is the moral equivalent of <CODE>XGC.ResolveStrokeGC</CODE> in xvbt. </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="WinContext.m3.html#Pop">Pop</A> (READONLY ctxt: T);
</PRE><BLOCKQUOTE><EM> Undo the modifications to the device context <CODE>ctxt.hdc</CODE>. </EM></BLOCKQUOTE><PRE>

END WinContext.
</PRE>
</inInterface>
<PRE>























</PRE>
</BODY>
</HTML>
